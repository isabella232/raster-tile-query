[![Build Status](https://travis-ci.org/mapbox/raster-tile-query.svg?branch=master)](https://travis-ci.org/mapbox/raster-tile-query)

# raster-tile-query

raster-tile-query allows you to query raster tiles and return pixel values at specific lng, lats

# API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

## getPixels

Get the pixel value information for a given array of lat/long coordinate pairs

**Parameters**

-   `imageBuffer` **[Buffer](https://nodejs.org/api/buffer.html)** 
-   `coords` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** array of x/y point arrays
-   `zxy` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** zxy object in the form of `{z: z, x: x, y: y}`
-   `tileSize` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** pixel size of the tile (all tiles are perfect squares)
-   `ids` **[Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array)** array of ids to represent the response for each coordinate in `coords`
-   `callback` **[Function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)** `function(err, results)`

**Examples**

```javascript
var fs = require('fs');
var img = fs.readFileSync('./path/to/tile.png');
var zxy = {
   z: 16,
   x:10642,
   y:24989
};
var points = [[-121, 39]];
readTile(zxy, function(err, data) {
  rtq.getPixels(img, points, zxy, 256, [0], function(err, results) {
    console.log(results);
    // [
    //   {
    //     "pixel": {
    //       "premultiplied": false,
    //       "a":255,
    //       "b":108,
    //       "g":72,
    //       "r":117
    //     },
    //     "latlng": {
    //       "lat":39,
    //       "lng":-121
    //     },
    //     "id":0
    //   }
    // ]
 });
});
```
